{% include "modern_header.html" %}

<div class="card">
    <div class="card-header">
        <h1 class="card-title">Create New Paste</h1>
        <p class="card-description">Share text, code, or files quickly and securely</p>
        {% if status != "" %}
        <div class="alert alert-info">
            {{ status }}
        </div>
        {%- endif %}
    </div>

    <form id="pasta-form" action="upload" method="POST" enctype="multipart/form-data">
        <!-- 主要内容区域 -->
        <div style="margin-bottom: var(--spacing-xl);">
            <label for="content">Content</label>
            <textarea name="content" id="content" placeholder="Paste your text here..." rows="8"></textarea>
        </div>

        <!-- 设置网格 -->
        <div id="settings">
            <!-- 过期时间 -->
            <div>
                <label for="expiration">
                    Expiration
                    <a href="{{ args.public_path_as_str() }}/guide#expiration" style="text-decoration: none; color: var(--text-muted);">ⓘ</a>
                </label>
                <select name="expiration" id="expiration">
                    <optgroup label="Expire after">
                        {% if args.default_expiry == "1min" %}
                        <option selected value="1min">1 minute</option>
                        {%- else %}
                        <option value="1min">1 minute</option>
                        {%- endif %}
                        
                        {% if args.default_expiry == "10min" %}
                        <option selected value="10min">10 minutes</option>
                        {%- else %}
                        <option value="10min">10 minutes</option>
                        {%- endif %}
                        
                        {% if args.default_expiry == "1hour" %}
                        <option selected value="1hour">1 hour</option>
                        {%- else %}
                        <option value="1hour">1 hour</option>
                        {%- endif %}
                        
                        {% if args.default_expiry == "24hour" %}
                        <option selected value="24hour">24 hours</option>
                        {%- else %}
                        <option value="24hour">24 hours</option>
                        {%- endif %}
                        
                        {% if args.default_expiry == "3days" %}
                        <option selected value="3days">3 days</option>
                        {%- else %}
                        <option value="3days">3 days</option>
                        {%- endif %}
                        
                        {% if args.default_expiry == "1week" %}
                        <option selected value="1week">1 week</option>
                        {%- else %}
                        <option value="1week">1 week</option>
                        {%- endif %}
                    </optgroup>
                    
                    {% if args.eternal_pasta %}
                    {% if args.default_expiry == "never" %}
                    <option selected value="never">Never Expire</option>
                    {%- else %}
                    <option value="never">Never Expire</option>
                    {%- endif %}
                    {%- endif %}
                </select>
            </div>

            <!-- 隐私设置 -->
            <div>
                <label for="privacy">Privacy</label>
                <select name="privacy" id="privacy">
                    <option value="public">Public</option>
                    {% if args.enable_readonly %}
                    <option value="private">Private</option>
                    <option value="unlisted">Unlisted</option>
                    {%- endif %}
                </select>
            </div>

            <!-- 语法高亮 -->
            <div>
                <label for="syntax_highlight">
                    Syntax Highlighting
                    <a href="{{ args.public_path_as_str() }}/guide#syntax-highlighting" style="text-decoration: none; color: var(--text-muted);">ⓘ</a>
                </label>
                <select name="syntax_highlight" id="syntax_highlight">
                    <option value="none">None</option>
                    <option value="javascript">JavaScript</option>
                    <option value="python">Python</option>
                    <option value="rust">Rust</option>
                    <option value="html">HTML</option>
                    <option value="css">CSS</option>
                    <option value="json">JSON</option>
                    <option value="xml">XML</option>
                    <option value="sql">SQL</option>
                    <option value="bash">Bash</option>
                    <option value="c">C</option>
                    <option value="cpp">C++</option>
                    <option value="java">Java</option>
                    <option value="php">PHP</option>
                    <option value="go">Go</option>
                    <option value="typescript">TypeScript</option>
                </select>
            </div>

            <!-- 阅读后销毁 -->
            {% if args.enable_burn_after %}
            <div>
                <label for="burn_after">
                    Burn After Reading
                    <a href="{{ args.public_path_as_str() }}/guide#burn-after-reading" style="text-decoration: none; color: var(--text-muted);">ⓘ</a>
                </label>
                <select name="burn_after" id="burn_after">
                    {% if args.default_burn_after == 0 %}
                    <option selected value="0">Never</option>
                    {%- else %}
                    <option value="0">Never</option>
                    {%- endif %}
                    
                    {% if args.default_burn_after == 1 %}
                    <option selected value="1">1 read</option>
                    {%- else %}
                    <option value="1">1 read</option>
                    {%- endif %}
                    
                    {% if args.default_burn_after == 10 %}
                    <option selected value="10">10 reads</option>
                    {%- else %}
                    <option value="10">10 reads</option>
                    {%- endif %}
                    
                    {% if args.default_burn_after == 100 %}
                    <option selected value="100">100 reads</option>
                    {%- else %}
                    <option value="100">100 reads</option>
                    {%- endif %}
                </select>
            </div>
            {%- endif %}
        </div>

        <!-- 加密选项 -->
        {% if args.encryption_server_side || args.encryption_client_side %}
        <div style="margin: var(--spacing-xl) 0;">
            <h3 style="margin-bottom: var(--spacing-md); color: var(--text-primary);">Encryption Options</h3>
            
            {% if args.encryption_server_side %}
            <div style="margin-bottom: var(--spacing-md);">
                <label style="display: flex; align-items: center; gap: var(--spacing-sm);">
                    <input type="checkbox" name="encrypt_server" value="on">
                    <span>Server-side encryption</span>
                </label>
            </div>
            {%- endif %}
            
            {% if args.encryption_client_side %}
            <div style="margin-bottom: var(--spacing-md);">
                <label style="display: flex; align-items: center; gap: var(--spacing-sm);">
                    <input type="checkbox" name="encrypt_client" value="on">
                    <span>Client-side encryption</span>
                </label>
            </div>
            {%- endif %}
            
            <div>
                <label for="password">Password (optional)</label>
                <input type="password" name="password" id="password" placeholder="Enter password for encryption">
            </div>
        </div>
        {%- endif %}

        <!-- 文件上传 -->
        {% if !args.no_file_upload %}
        <div id="file-select">
            <label for="file">Attach File (optional)</label>
            <label for="file" id="attach-file-button-label">
                <div style="display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm);">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                    <span>Click to select file or drag and drop</span>
                </div>
            </label>
            <input type="file" name="file" id="file">
        </div>
        {%- endif %}

        <!-- 提交按钮 -->
        <div style="margin-top: var(--spacing-xl); text-align: center;">
            <input type="submit" value="Create Paste" style="min-width: 200px;">
        </div>
    </form>
</div>

{% include "modern_footer.html" %}
