{% include "modern_header_enhanced.html" %}

<!-- 自定义路径提示 -->
{% if custom_path.is_some() %}
<div class="alert alert-info">
    <div class="flex items-center gap-3">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
        <div>
            <h3 class="font-semibold text-base mb-1">Creating Custom Path Paste</h3>
            <p class="text-sm mb-0">
                You are creating new paste content for path <strong>/{{ custom_path.as_ref().unwrap() }}</strong>.
                After saving, you can access your content through this custom path.
            </p>
        </div>
    </div>
</div>
{%- endif %}

<!-- 状态消息 -->
{% if status != "" %}
<div class="alert alert-info">
    <div class="flex items-center gap-3">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
        <span>{{ status }}</span>
    </div>
</div>
{%- endif %}

<!-- 主要创建表单 -->
<div class="card">
    <div class="card-header">
        <h1 class="card-title gradient-text">Create New Paste</h1>
        <p class="card-description">Share text, code, or files quickly and securely with modern encryption and privacy controls</p>
    </div>

    <form id="pasta-form" action="upload" method="POST" enctype="multipart/form-data" class="form">
        <!-- 主要内容区域 -->
        <div class="form-group">
            <label for="content" class="form-label">
                Content
                <span class="text-tertiary text-sm font-normal">Paste your text, code, or any content here</span>
            </label>
            <textarea 
                name="content" 
                id="content" 
                class="form-textarea" 
                placeholder="Paste your text here... 

You can also:
• Drag and drop files
• Use Ctrl+V to paste
• Write code with syntax highlighting
• Add custom URLs for easy sharing"
                rows="8"
                spellcheck="false"
            ></textarea>
        </div>

        <!-- 自定义路径 -->
        <div class="form-group">
            <label for="custom_path" class="form-label">
                Custom Path
                <span class="text-tertiary text-sm font-normal">(Optional) Create a memorable URL</span>
            </label>
            <div class="flex items-center gap-2">
                <span class="text-secondary text-sm">{{ args.public_path_as_str() }}/</span>
                <input 
                    type="text" 
                    name="custom_path" 
                    id="custom_path" 
                    class="form-input" 
                    placeholder="my-awesome-paste"
                    pattern="[a-zA-Z0-9\-_]+"
                    title="Only letters, numbers, hyphens, and underscores allowed"
                >
            </div>
            <div class="text-xs text-tertiary mt-1">
                Leave empty for auto-generated path. Only letters, numbers, hyphens, and underscores allowed.
            </div>
        </div>

        <!-- 设置网格 -->
        <div class="settings-grid">
            <!-- 过期时间 -->
            <div class="form-group">
                <label for="expiration" class="form-label">
                    Expiration
                    <a href="/guide#expiration" class="form-help" data-tooltip="Learn about expiration options">?</a>
                </label>
                <select name="expiration" id="expiration" class="form-select">
                    <optgroup label="Expire after">
                        <option value="1min">1 minute</option>
                        <option value="10min">10 minutes</option>
                        <option value="1hour">1 hour</option>
                        <option value="24hour" selected>24 hours</option>
                        <option value="3days">3 days</option>
                        <option value="1week">1 week</option>
                    </optgroup>
                    
                    {% if args.eternal_pasta %}
                    <option value="never">Never Expire</option>
                    {%- endif %}
                </select>
            </div>

            <!-- 隐私设置 -->
            <div class="form-group">
                <label for="privacy" class="form-label">
                    Privacy
                    <a href="/guide#privacy" class="form-help" data-tooltip="Learn about privacy options">?</a>
                </label>
                <select name="privacy" id="privacy" class="form-select">
                    <optgroup label="Unencrypted (no password)">
                        <option value="public" selected>Public</option>
                    </optgroup>
                    {% if args.enable_readonly %}
                    <optgroup label="Unencrypted (protected)">
                        <option value="readonly">Read-only</option>
                    </optgroup>
                    {%- endif %}
                    {% if args.encryption_server_side || args.encryption_client_side %}
                    <optgroup label="Encrypted">
                        <option value="secret">Secret</option>
                    </optgroup>
                    {%- endif %}
                </select>
            </div>

            <!-- 语法高亮 -->
            <div class="form-group">
                <label for="syntax_highlight" class="form-label">
                    Syntax Highlighting
                    <a href="/guide#syntax-highlighting" class="form-help" data-tooltip="Choose language for code highlighting">?</a>
                </label>
                <select name="syntax_highlight" id="syntax_highlight" class="form-select">
                    <option value="none" selected>None</option>
                    <optgroup label="Client-Rendered">
                        <option value="auto">Automatic</option>
                    </optgroup>
                    <optgroup label="Server-Rendered">
                        <option value="sh">Bash Shell</option>
                        <option value="c">C</option>
                        <option value="cpp">C++</option>
                        <option value="cs">C#</option>
                        <option value="pas">Delphi</option>
                        <option value="erl">Erlang</option>
                        <option value="go">Go</option>
                        <option value="hs">Haskell</option>
                        <option value="html">HTML</option>
                        <option value="lua">Lua</option>
                        <option value="lisp">Lisp</option>
                        <option value="java">Java</option>
                        <option value="js">JavaScript</option>
                        <option value="kt">Kotlin</option>
                        <option value="py">Python</option>
                        <option value="php">PHP</option>
                        <option value="r">R</option>
                        <option value="rs">Rust</option>
                        <option value="rb">Ruby</option>
                        <option value="sc">Scala</option>
                        <option value="swift">Swift</option>
                        <option value="json">TOML</option>
                        <option value="yaml">YAML</option>
                        <option value="json">JSON</option>
                        <option value="xml">XML</option>
                    </optgroup>
                </select>
            </div>

            <!-- 阅读后销毁 -->
            {% if args.enable_burn_after %}
            <div class="form-group">
                <label for="burn_after_reads" class="form-label">
                    Burn After Reading
                    <a href="/guide#burn-after-reading" class="form-help" data-tooltip="Auto-delete after specified reads">?</a>
                </label>
                <select name="burn_after_reads" id="burn_after_reads" class="form-select">
                    <option value="0" selected>No Limit</option>
                    <optgroup label="Burn after">
                        <option value="1">First Read</option>
                        <option value="10">10th Read</option>
                        <option value="100">100th Read</option>
                        <option value="1000">1000th Read</option>
                        <option value="10000">10000th Read</option>
                    </optgroup>
                </select>
            </div>
            {%- endif %}
        </div>

            <!-- 密码字段 -->
            <div class="form-group">
                <label for="password_field" class="form-label">
                    Password
                    <a href="/guide#password" class="form-help" data-tooltip="Password for encryption or read-only protection">?</a>
                </label>
                <input
                    type="password"
                    name="password"
                    id="password_field"
                    class="form-input"
                    placeholder="Enter password (optional)"
                    autocomplete="new-password"
                >
            </div>
        </div>

        <!-- 文件上传 -->
        {% if !args.no_file_upload %}
        <div class="file-upload">
            <label for="file" class="form-label">
                Attach File
                <span class="text-tertiary text-sm font-normal">(Optional) Drag & drop or click to select</span>
            </label>
            <label for="file" class="file-upload-area">
                <div class="file-upload-content">
                    <svg class="file-upload-icon" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                    <div class="file-upload-text">Click to select file or drag and drop</div>
                    <div class="file-upload-subtext">Any file type supported • Max size depends on server settings</div>
                </div>
            </label>
            <input type="file" name="file" id="file" class="file-input">
        </div>
        {%- endif %}

        <!-- 提交按钮 -->
        <div class="action-buttons action-buttons-center mt-8">
            <input type="submit" value="🚀 Create Paste" class="btn btn-primary btn-lg">
        </div>
    </form>
</div>



{% include "modern_footer_enhanced.html" %}
